

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Flask Templates &mdash; Python Beginners  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="configparser" href="configparser.html" />
    <link rel="prev" title="Flask, Part 2" href="flask2.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Python Beginners
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="learn_python.html">Starting Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="lists.html">Working with Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_files.html">Reading and Writing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="dicts.html">Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="csv.html">CSV Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="scraping.html">Web Scraping Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="scraping2.html">Web Scraping, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="scraping3.html">Web Scraping, Part 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="flask.html">Flask Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="flask2.html">Flask, Part 2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Flask Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#folder-structure-for-a-flask-app">Folder structure for a Flask app</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-started-with-templates">Get started with templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-does-a-flask-app-use-a-template">How does a Flask app use a template?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-are-variables-passed-from-app-to-template">How are variables passed from app to template?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-of-the-presidents-app">Walkthrough of the presidents app</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#converting-a-csv-to-a-list-of-dictionaries">Converting a CSV to a list of dictionaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configparser.html">configparser</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python Beginners</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Flask Templates</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/flask3.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="flask-templates">
<h1>Flask Templates<a class="headerlink" href="#flask-templates" title="Permalink to this headline">¶</a></h1>
<p>Previous:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="flask.html">Flask intro</a>: A very simple Flask app</p></li>
<li><p><a class="reference external" href="flask2.html">Flask, part 2</a>: Values in routes; using an API</p></li>
</ol>
<p>Code for this chapter is <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/tree/master/python_code_examples/flask">here</a>.</p>
<p>In the previous Flask chapters, we wrote some HTML directly into the Flask app script. This is very awkward. Naturally, Flask provides a better way to store the HTML (and CSS) you will want your Flask functions to generate.</p>
<div class="section" id="folder-structure-for-a-flask-app">
<h2>Folder structure for a Flask app<a class="headerlink" href="#folder-structure-for-a-flask-app" title="Permalink to this headline">¶</a></h2>
<p>A proper Flask app is going to use multiple files — some of which will be template files. The organization of these files has to follow rules so the app will work. Here is a diagram of the typical structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>my-flask-app
   ├── static/
   │   └── css/
   │       └── main.css
   ├── templates/
   │   ├── index.html
   │   └── student.html
   ├── data.py
   └── students.py
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Everything the app needs is in one folder, here named <em>my-flask-app</em>.</p></li>
<li><p>That folder contains two folders, specifically named <em>static</em> and <em>templates</em>.</p>
<ul class="simple">
<li><p>The <em>static</em> folder contains <strong>assets</strong> used by the templates, including CSS files, JavaScript files, and images. In the example, we have only one asset file, <em>main.css</em>. Note that it’s inside a <em>css</em> folder that’s inside the <em>static</em> folder.</p></li>
<li><p>The <em>templates</em> folder contains only templates. These have an <code class="docutils literal notranslate"><span class="pre">.html</span></code> extension. As we will see, they contain more than just regular HTML.</p></li>
</ul>
</li>
<li><p>In addition to the <em>static</em> and <em>templates</em> folders, this app also contains <code class="docutils literal notranslate"><span class="pre">.py</span></code> files. Note that these must be <em>outside</em> the two folders named <em>static</em> and <em>templates</em>.</p></li>
</ol>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The templates will not work if this folder structure is not exactly as described above. Your app folder can be named anything (not only <em>my-flask-app</em>), but the <em>static</em> and <em>templates</em> folders must be named and organized as shown above. The <em>static</em> folder can contain multiple folders and files.</p>
</div>
</div>
<div class="section" id="get-started-with-templates">
<h2>Get started with templates<a class="headerlink" href="#get-started-with-templates" title="Permalink to this headline">¶</a></h2>
<p>Let’s first imagine a situation where we are going to need a lot of pages that all have the same layout.</p>
<p>For example, we might want to build an app that includes all the U.S. presidents. Each president will have their own page, like this:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/prespage.png"><img alt="President page screenshot" src="_images/prespage.png" style="width: 600.0px; height: 674.0px;" /></a>
</div>
<p>We do not want to build 45 pages by hand. We happen to have all the presidential data <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/blob/master/python_code_examples/flask/presidents/presidents.csv">in a spreadsheet</a>. Can we make <em>one HTML template</em> and be done?</p>
<p>Yes!</p>
<p>Here is an excerpt from that template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;President&#39;</span><span class="p">]</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;President&#39;</span><span class="p">]</span> <span class="p">}},</span> <span class="n">the</span> <span class="p">{{</span> <span class="nb">ord</span> <span class="p">}}</span> <span class="n">president</span> <span class="n">of</span> <span class="n">the</span>
   <span class="n">United</span> <span class="n">States</span><span class="p">,</span> <span class="n">was</span> <span class="n">born</span> <span class="n">on</span> <span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Birth-date&#39;</span><span class="p">]</span> <span class="p">}},</span> <span class="ow">in</span>
   <span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Birthplace&#39;</span><span class="p">]</span> <span class="p">}}</span><span class="o">.</span> <span class="n">He</span> <span class="n">was</span> <span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Age-when-took-office&#39;</span><span class="p">]</span> <span class="p">}}</span>
   <span class="n">when</span> <span class="n">he</span> <span class="n">took</span> <span class="n">office</span> <span class="n">on</span> <span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Took-office&#39;</span><span class="p">]</span> <span class="p">}}</span><span class="o">.</span> <span class="n">Member</span><span class="p">:</span>
   <span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Party&#39;</span><span class="p">]</span> <span class="p">}}</span> <span class="n">Party</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>That might look slightly intimidating, but notice that inside each double-pair of curly braces is a <strong>key</strong> (in square brackets) that tells you exactly which information item will appear there. So, for Lincoln:</p>
<blockquote>
<div><p><em>Abraham Lincoln, the 16th president of the United States, was born on 2/12/1809, in LaRue County, Kentucky. He was 52 when he took office on 3/4/1861. Member: Republican/National Union Party.</em></p>
</div></blockquote>
<div class="section" id="how-does-a-flask-app-use-a-template">
<h3>How does a Flask app use a template?<a class="headerlink" href="#how-does-a-flask-app-use-a-template" title="Permalink to this headline">¶</a></h3>
<p>In the previous chapter, <a class="reference external" href="flask2.html">Flask, part 2</a>, you saw this route function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">personal</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;h1&gt;Hello, </span><span class="si">{name}</span><span class="s1">!&lt;/h1&gt;&#39;</span>
    <span class="n">instruc</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;Change the name in the &lt;em&gt;browser address bar&lt;/em&gt; </span><span class="se">\</span>
<span class="s1">        and reload the page.&lt;/p&gt;&#39;</span>
    <span class="k">return</span> <span class="n">personal</span> <span class="o">+</span> <span class="n">instruc</span>
</pre></div>
</div>
<p>Let’s transform that so it uses a template.</p>
<ol class="arabic">
<li><p>Put the HTML into a template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;h1&gt;Hello, {{ name }}!&lt;/h1&gt;

&lt;p&gt;Change the name in the &lt;em&gt;browser address bar&lt;/em&gt;
    and reload the page.&lt;/p&gt;
</pre></div>
</div>
</li>
<li><p>Save the template file as <em>hello.html</em> in the <em>templates</em> folder.</p></li>
<li><p>Edit the route function. Remove the HTML. Change the return statement — call the <code class="docutils literal notranslate"><span class="pre">render_template</span></code> function. That is how we get the template!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;hello.html&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>We must import the <code class="docutils literal notranslate"><span class="pre">render_template</span></code> module, so add it to the line at the top of the Flask app script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The template needs to be a complete HTML file, with all the usual elements such as HTML, HEAD, and BODY. See the complete example below.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">../python_code_examples/flask/first_template_ex/templates/hello.html</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello HTML Templates<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;main.css&#39;) }}&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello, {{ name }}!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Change the name in the <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>browser address bar<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span>
        and reload the page.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>In the HEAD above, in the LINK element, note the syntax for linking to a file in the <em>static</em> folder. The CSS file is just a normal CSS file, but it must be in the <em>static</em> folder for the Flask app.</p>
</div>
<p>Syntax for a path to a file in the <em>static</em> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">href</span><span class="o">=</span><span class="s2">&quot;{{ url_for(&#39;static&#39;, filename=&#39;main.css&#39;) }}&quot;</span>
</pre></div>
</div>
<p>Syntax for a path to a file inside a folder in the <em>static</em> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scr</span><span class="o">=</span><span class="s2">&quot;{{ url_for(&#39;static&#39;, filename=&#39;images/foo.jpg&#39;) }}&quot;</span>
</pre></div>
</div>
<p>☞ <a class="reference external" href="https://first-baby-flask-app.herokuapp.com/">View the live “hello” app here.</a></p>
<p>☞ <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/tree/master/python_code_examples/flask/first_template_ex">All the “hello” app’s files are here.</a></p>
</div>
<div class="section" id="how-are-variables-passed-from-app-to-template">
<h3>How are variables passed from app to template?<a class="headerlink" href="#how-are-variables-passed-from-app-to-template" title="Permalink to this headline">¶</a></h3>
<p>The templates in Flask are handled by the Jinja template engine, which comes with Flask when you first install it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">render_template()</span></code> function both selects the template file to be used and passes to it any values or variable it needs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;example.html&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">phone</span><span class="o">=</span><span class="n">phone_number</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;FL&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can pass as many variables as necessary to the template. In the example above, the <strong>template</strong> must contain variables for <em>name, phone,</em> and <em>state.</em> That is, these expressions must be somewhere in the template named <em>example.html</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">name</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">phone</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">state</span> <span class="p">}}</span>
</pre></div>
</div>
<p>The <em>value</em> (on the right side of the equals sign) must come from the code in the Flask app file. In the example above, both <em>name</em> and <em>phone_number</em> must already have a value before the <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">render_template()</span></code> line. Note that <code class="docutils literal notranslate"><span class="pre">'FL'</span></code> is a string — we can pass in a string, integer, float, or Boolean.</p>
<p>It’s also possible to pass lists or dictionaries as <em>values</em> to a template. Here’s a line from <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/tree/master/python_code_examples/flask/presidents">the presidents app</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;president.html&#39;</span><span class="p">,</span>
    <span class="n">pres</span><span class="o">=</span><span class="n">pres_dict</span><span class="p">,</span> <span class="nb">ord</span><span class="o">=</span><span class="nb">ord</span><span class="p">,</span> <span class="n">the_title</span><span class="o">=</span><span class="n">pres_dict</span><span class="p">[</span><span class="s1">&#39;President&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The template file is named <em>president.html,</em> and the values depend on a Python dictionary, <code class="docutils literal notranslate"><span class="pre">pres_dict</span></code>, that was defined earlier in the Flask app script. We can see the following expressions in the template’s HTML:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="nb">ord</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;President&#39;</span><span class="p">]</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Birth-date&#39;</span><span class="p">]</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">pres</span><span class="p">[</span><span class="s1">&#39;Birthplace&#39;</span><span class="p">]</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Why <code class="docutils literal notranslate"><span class="pre">pres</span></code> and not <code class="docutils literal notranslate"><span class="pre">pres_dict</span></code>? Because <code class="docutils literal notranslate"><span class="pre">pres=pres_dict</span></code>. In the <code class="docutils literal notranslate"><span class="pre">render_template()</span></code> function call, the dictionary <code class="docutils literal notranslate"><span class="pre">pres_dict</span></code> is assigned to the template’s variable <code class="docutils literal notranslate"><span class="pre">pres</span></code>.</p>
<p>If you need help understanding Python dictionaries, see the <a class="reference external" href="dicts.html">Dictionaries chapter</a>.</p>
<p>In another template, <em>base.html,</em> we can see this expression in the HEAD element:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">the_title</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Because <code class="docutils literal notranslate"><span class="pre">the_title=pres_dict['President']</span></code>, the HTML TITLE element will be filled in with the value of the dictionary item that has the <strong>key</strong> <code class="docutils literal notranslate"><span class="pre">'President'</span></code>.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/prestitle.png"><img alt="President title screenshot" src="_images/prestitle.png" style="width: 613.0px; height: 338.0px;" /></a>
</div>
<p>Recall that the HTML TITLE is visible in the browser tab, as seen above.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If a template uses a lot of variables, it’s <em>much</em> shorter and easier to pass a dictionary to the template than to specify all the individual variables in the <code class="docutils literal notranslate"><span class="pre">render_template()</span></code> function.</p>
</div>
</div>
</div>
<div class="section" id="walkthrough-of-the-presidents-app">
<h2>Walkthrough of the presidents app<a class="headerlink" href="#walkthrough-of-the-presidents-app" title="Permalink to this headline">¶</a></h2>
<p>Now we will examine this app so you can build one like it yourself.</p>
<p>☞ <a class="reference external" href="https://weimergeeks.com/flask_pres/">View the live presents app here.</a></p>
<p>☞ <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/tree/master/python_code_examples/flask/presidents">View the code for the presidents app.</a></p>
<div class="section" id="converting-a-csv-to-a-list-of-dictionaries">
<h3>Converting a CSV to a list of dictionaries<a class="headerlink" href="#converting-a-csv-to-a-list-of-dictionaries" title="Permalink to this headline">¶</a></h3>
<p>This is covered in <a class="reference external" href="csv.html#reading-into-a-dictionary">the CSVs chapter</a>. All the data we need about the U.S. presidents is in this <a class="reference external" href="https://github.com/macloo/python-adv-web-apps/blob/master/python_code_examples/flask/presidents/presidents.csv">CSV file</a>.</p>
<p>Early in the Flask app in <em>presidents.py,</em> we create a <strong>list</strong> of dictionaries named <code class="docutils literal notranslate"><span class="pre">presidents_list</span></code>. Each <strong>item</strong> in the list is a dictionary. Each dictionary contains all the data about ONE president. That is, each dictionary is equivalent to one row from the original CSV.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">presidents_list</span></code> to:</p>
<ol class="arabic">
<li><p>Populate a template with all the data about a selected president.</p></li>
<li><p>Use a unique ID number — in the <strong>key</strong> <code class="docutils literal notranslate"><span class="pre">'Presidency'</span></code> — to determine which president has been selected. This will be used in the Flask <strong>route</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/president/&lt;num&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Create a list of pairs in which each pair consists of the unique ID and the name of the president it belongs to. This will be used to create an HTML list of all the presidents’ names, which are links to the Flask route.</p></li>
</ol>
<p>Here is the top of the <em>presidents.py</em> script:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">modules</span> <span class="kn">import</span> <span class="n">convert_to_dict</span><span class="p">,</span> <span class="n">make_ordinal</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">app</span>

<span class="c1"># create a list of dicts</span>
<span class="n">presidents_list</span> <span class="o">=</span> <span class="n">convert_to_dict</span><span class="p">(</span><span class="s2">&quot;presidents.csv&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The list is created on line 8, using a function in an external file named <em>modules.py</em>. The function <code class="docutils literal notranslate"><span class="pre">convert_to_dict()</span></code> was imported from that file on line 2.</p>
</div>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://jinja.palletsprojects.com/en/2.11.x/templates/">Jinja documentation</a> — All the commands for the Jinja template syntax are here.</p></li>
<li><p><a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#rendering-templates">Flask documentation</a> for <code class="docutils literal notranslate"><span class="pre">render_template()</span></code>.</p></li>
</ul>
<p>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configparser.html" class="btn btn-neutral float-right" title="configparser" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flask2.html" class="btn btn-neutral float-left" title="Flask, Part 2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 Mindy McAdams

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>